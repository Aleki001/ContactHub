<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title> Contact Sense | Contacts </title>
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
        <link href="css/style.css" rel="stylesheet">
    </head>
        
        <body id="body-pd" class="contacts-page">
        <div class="container-xxl position-relative bg-white d-flex p-0 ">
            <!--            header start-->
            <div th:insert="~{layout/header}"></div>
            <!--            header end-->

            <!--            sidebar start-->
            <div th:insert="~{layout/sidebar}"></div>
            <!--            sidebar end-->

              <!-- All Contacts Start -->
            <div class="container-fluid py-4">
                <div class="bg-light rounded p-4">
                    <!-- error/info alert messages start-->
                    <div class="row mt-2">
                        <div th:if="${param.update_success}" class="col-sm-8" >
                            <p class="alert alert-info alert-dismissible fade show" role="alert">
                                Contact has been updated successfully.
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </p>
                        </div>
                        <div th:if="${param.save_success}" class="col-sm-8">
                            <p class="alert alert-info alert-dismissible fade show" role="alert">
                                Contact has been saved successfully.
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </p>
                        </div>
                        <div th:if="${param.delete_success}" class="col-sm-8">
                            <p class="alert alert-info alert-dismissible fade show" role="alert">
                                Contact has been deleted successfully.
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </p>
                        </div>
                    </div>
                    <!-- error/info alert messages start-->
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h3 class="mb-0">My Contacts</h3>
                        <a class="btn btn-primary" th:href="@{/createContact}">Add Contact</a>
                    </div>
                    <div class="table-responsive">
                        <table class="table text-start align-middle table-bordered table-hover mb-0">
                            <thead>
                            <tr class="text-dark">
                                <th scope="col">
                                    <a th:href="@{'/availableContacts/page/' + ${currentPage} + '?sortField=id&sortDir=' + ${reverseSortDir}}">Id</a>
                                </th>
                                <th scope="col">
                                    <a th:href="@{'/availableContacts/page/' + ${currentPage} + '?sortField=firstName&sortDir=' + ${reverseSortDir}}" >First Name</a>
                                </th>
                                <th scope="col">
                                    <a th:href="@{'/availableContacts/page/' + ${currentPage} + '?sortField=lastName&sortDir=' + ${reverseSortDir}}">Last Name</a>
                                </th>
                                <th scope="col">
                                    <a th:href="@{'/availableContacts/page/' + ${currentPage} + '?sortField=email&sortDir=' + ${reverseSortDir}}">Email</a>
                                </th>

                                <th colspan="3">Action</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each= "contact : ${contacts}">
                                <td th:text="${contact.id}"></td>
                                <td th:text="${contact.firstName}"></td>
                                <td th:text="${contact.lastName}"></td>
                                <td th:text="${contact.email}"></td>
                                <td><a class="btn btn-sm btn-primary" href="#">Details</a></td>
                                <td><a href="#" class="btn btn-sm btn-dark" th:href="@{/editContact/{id}(id=${contact.id})}">Edit</a></td>
                                <td><a href="#" class="btn btn-sm btn-danger" th:href="@{/deleteContact/{id}(id=${contact.id})}">Delete</i></a></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="m-2"><i>Sorted by [[${sortField}]] in [[${sortDir}]] order</i></div>

<!--                    Page No start-->
                    <div th:if = "${totalPages > 1}" class="my-5">
                        <div class="row col-sm-10">
                            <div class="col-sm-2">
                                Total Contacts: [[${totalItems}]]
                            </div>
                            <div class="col-sm-1">
                                <a th:if="${currentPage > 1}" th:href="@{'/availableContacts/page/1' + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">First</a>
                                <span th:unless="${currentPage > 1}">First</span>
                            </div>
                            <div class="col-sm-1">
                                <a th:if="${currentPage > 1}" th:href="@{'/availableContacts/page/' + ${currentPage - 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Previous</a>
                                <span th:unless="${currentPage > 1}">Previous</span>
                            </div>
                            <div class="col-sm-1">
                                <a th:if="${currentPage < totalPages}" th:href="@{'/availableContacts/page/' + ${currentPage + 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Next</a>
                                <span th:unless="${currentPage < totalPages}">Next</span>
                            </div>
                            <div class="col-sm-1">
                                <a th:if="${currentPage < totalPages}" th:href="@{'/availableContacts/page/' + ${totalPages} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Last</a>
                                <span th:unless="${currentPage < totalPages}">Last</span>
                            </div>
                        </div>
                    </div>

                    <!--                    Page No end-->

                </div>
            </div>
            <!-- All contacts End -->


        </div>

        
    </body>
    <script src="js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</html>
